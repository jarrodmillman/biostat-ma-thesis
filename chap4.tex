\chapter{\label{ch:nextsteps}Next steps}

While the development of \texttt{permute} will continue to be guided by the
scientific projects we engage with, there are a few things already planned.

\section{\label{sec:book}``Permutation Tests for Complex Data'' Examples}

On the companion
website\footnote{\url{http://www.wiley.com/legacy/wileychi/pesarin/material.html}}
to ``Permutation Tests for Complex Data: Theory, Applications and
Software'' by F. Pesarin and L. Salmaso \cite{pesarin2010permutation}, the
authors provide several R functions for implementing the application examples
presented in their book.  They've also made their datasets available for download
(as well as some Matlab and SAS code).  In preparation for the second edition,
we will be implementing these examples in Python as part of our package.

As mentioned above, these datasets are already included in our package.  We've
also created a GitHub
repository,\footnote{\url{https://github.com/statlab/permuter}} where we've
made some tentative improvements to the code.  In order to create a test suite
to ensure we are able to independently produce the results given by the R
implementation, we plan to develop it into a simple R package.  Since the
existing R code was released for the purpose of illustration, rather than as an
attempt by the authors to provide an R library for reuse, we do not currently
plan to submit the package to CRAN.  However, it will be publicly-available on
GitHub and will be easily installable (we will need to make it easy to install
for the purposes of our automated testing anyway).

In addition to using the examples and R code as part of our testing suite, we
will also include a detailed discussion of each example from the book in our
user documentation.  While our intention is not to further develop and improve
the R package, we will fix bugs and refactor the code as necessary to ensure
that we can validate our results for the examples using \texttt{permute} with
an independent implementation in R.  As part of our documentation we will
include snippets of the R code, in the hopes that it might serve users of
\texttt{permute} who are more familiar with R as they work through the examples
in Python.

\section{Missing features and new projects}

%There are still many standard tests that we have yet to add.
%As time permits, we will also start adding functionality to round out the
%diversity of permutation tests we provide.  

Adding new permutation tests (e.g., for slope in linear regression, for
independence and association (e.g., runs tests), or for symmetry) will be easy to
do now that we have our development infrastructure in place and have started
developing a sense of how we will ultimately organize our modules and
subpackages.  Even without motivating scientific collaborations, we will begin
adding these tests and their associated confidence sets as it will help us
refine our naming and call signature conventions.

While our motivating scientific collaborations have so far involved small- to
moderate-sized datasets, we will soon begin working with larger datasets.  In
particular, we will begin using our software for problems from
genomics and functional neuroimaging.  Both of these problem domains already
make use of permutation tests and the size of the datasets will help us
better understand the scalability issues.

\section{Design decisions}

Thus far we have limited our core dependencies to NumPy and SciPy.
As we add new functionality, we will be tempted to leverage additional
external packages.  For pure Python packages, this will cause little
difficulty.  However, many of the packages we will be interested in
are partially implemented in C or another compiled language.  Depending
on packages that require compilation, will increase the complexity
of installation for some users.

While choosing what packages to depend
on will require some thought, a more difficult set of questions will arise as
we attempt to finalize our application programming interface (API).  We've
already spent a lot of effort unifying our call signatures and naming
conventions.  However, we have begun discussing more generic structures for
specifying test statistics.  At the very least, we would like to be able to
pass functions, rather than using strings as we currently do.  If we go this
route it may make sense to consider creating test statistics classes that
we can instantiate with the test statistic function.  A more interesting
possibility would be to see if we can create something like R's formula
for specifying our permutation models.

Finally, as we start implementing more tests and applying our package
to larger datasets, we will need to take performance more seriously.
While we've been able to stick to a pure Python implementation so far,
we will eventual need to write C extensions or use something like
Cython to improve computation time.  As permutation tests are inherently
parallelizable, we will also need to consider providing parallel processing
support.
